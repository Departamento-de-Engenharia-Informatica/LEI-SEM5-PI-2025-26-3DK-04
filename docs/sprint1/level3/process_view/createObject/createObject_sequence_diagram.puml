@startuml CreateObject
autonumber

actor "User" as User
participant "ObjectController" as Controller
participant "ObjectService" as Service
participant "Object" as Object
participant "IObjectRepository" as Repository
participant "UnitOfWork" as UoW
database "Database" as DB

activate User

User -> Controller : POST /api/Object\n{objectData}
activate Controller

Controller -> Service : CreateAsync(dto)
activate Service

Service -> Object : new Object(dto)
activate Object
Object -> Object : validate business rules
Object --> Service : object
deactivate Object

Service -> Repository : AddAsync(object)
activate Repository
Repository --> Service : void
deactivate Repository

Service -> UoW : CommitAsync()
activate UoW
UoW -> DB : SaveChangesAsync()
activate DB
DB --> UoW : int (rows affected)
deactivate DB
UoW --> Service : int
deactivate UoW

Service -> Service : MapToDto(object)
Service --> Controller : ObjectDto
deactivate Service

Controller --> User : 201 Created\n{objectDto}
deactivate Controller
deactivate User

@enduml