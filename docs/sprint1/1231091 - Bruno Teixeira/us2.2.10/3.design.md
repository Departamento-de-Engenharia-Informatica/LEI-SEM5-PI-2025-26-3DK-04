## 3. Design

### 3.1. System Sequence Diagram (SSD)

![SSD Search Notifications](sdUS2.2.10_search.svg)

---

### 3.2. Interaction Responsibility Assignment

| Interaction Step                                        | Question: Which class is responsible for…      | Class                                  | Justification (with patterns)                                               |
|---------------------------------------------------------|------------------------------------------------|----------------------------------------|----------------------------------------------------------------------------|
| Step 1: Representative requests to search notifications | Handling user input and triggering the process | `VesselVisitNotificationsController`   | **Controller:** Coordinates actions and delegates to application services. |
| Step 2: Validate and process business logic             | Validating input and executing business rules  | `VesselVisitNotificationService`       | **Information Expert:** Centralizes the business logic.                    |
| Step 3: Search with filters and organization context    | Querying notifications with access control     | `VesselVisitNotificationRepository`    | **Repository Pattern:** Handles data persistence and query logic.          |
| Step 4: Return results                                  | Showing search results                         | `VesselVisitNotificationsController`   | **Controller:** Manages user interaction and result display.               |

---

### 3.3. Sequence Diagram



### 3.4. SOLID Principles

| Principle                                     | Application in US_2.2.10                                                                              | Explanation                                         |
|----------------------------------------------|------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
| **S – Single Responsibility Principle (SRP)** | `VesselVisitNotificationsController` handles only coordination of business logic.                   | Keeps UI, logic, and persistence separated.         |
|                                              | `VesselVisitNotificationService` validates and processes business rules.                            | Focused solely on notification search logic.        |
|                                              | `VesselVisitNotification` encapsulates domain logic.                                                | Isolates business entities from infrastructure.     |
| **O – Open/Closed Principle (OCP)**           | Services and domain classes can be extended with new filters without changing existing logic.        | Allows extensibility with minimal modification.     |
| **L – Liskov Substitution Principle (LSP)**   | `IVesselVisitNotificationRepository` can be replaced by any implementation (e.g., SQL, in-memory).   | Promotes interchangeable components.                |
| **I – Interface Segregation Principle (ISP)** | Interfaces like `IVesselVisitNotificationRepository` are focused on essential operations.            | Prevents unnecessary dependencies.                  |
| **D – Dependency Inversion Principle (DIP)**  | The controller depends on abstractions (`IVesselVisitNotificationRepository`).                       | Promotes decoupling and enables testing with mocks. |

---

### 3.5. GoF Patterns

| Pattern                          | Usage in US_2.2.10                                                                                    | Explanation                                       |
|----------------------------------|------------------------------------------------------------------------------------------------------|---------------------------------------------------|
| **Controller**                   | `VesselVisitNotificationsController` coordinates the flow between UI, domain, and persistence.      | Acts as mediator between layers.                  |
| **Repository**                   | `IVesselVisitNotificationRepository` encapsulates persistence operations.                            | Abstracts database access.                        |
| **Information Expert**           | `VesselVisitNotificationService` contains search logic and filter validation.                        | Service holds relevant knowledge for queries.     |
| **Pure Fabrication**             | `NotificationFilterDto` exists for technical separation of concerns.                                 | Improves maintainability and testability.         |
| **Low Coupling / High Cohesion** | Clear separation between layers and well-defined responsibilities.                                   | Reduces interdependencies and increases cohesion. |

---
