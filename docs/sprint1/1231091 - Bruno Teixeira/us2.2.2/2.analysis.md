```markdown
## 2. Analysis

### 2.1. User Story Overview

**ID:** US_2.2.2
**Title:** Register and Update Vessel Records

**Description:**
As a Port Authority Officer, register and update vessel records so valid vessels can be referenced in visit notifications.

### 2.2. Business Rules
1. Only authenticated users with role Port Authority Officer can create/update vessels.
2. IMO number must follow the official format (7 digits + check digit). Invalid IMOs are rejected.
3. Each vessel record must have an IMO number and a name and a vessel type reference (must exist).
4. Vessel type provided must exist in the system (dependency on US_2.2.1).
5. Vessel records must be searchable by IMO, name or operator.

### 2.3. Edge cases
- Duplicate IMO on create — reject with BusinessRuleValidationException.
- Update with non-existing vessel type id — reject.
- Partial updates only for allowed fields (owner/operator most common) — design will allow updating any field but tests should cover typical changes.

---

```
