<section class="deactivate-representative">
  <div class="container">
    <h1>{{ t('manageRepresentatives.deactivateTitle') }}</h1>
    <p>{{ t('manageRepresentatives.deactivateSubtitle') }}</p>

    <!-- Controles da lista -->
    <div class="list-controls">
      <input
        placeholder="{{ t('manageRepresentatives.searchPlaceholder') }}"
        [(ngModel)]="searchTerm"
        (input)="applyFilter()"
      />
      <button (click)="loadRepresentatives()">
        {{ t('manageRepresentatives.refresh') }}
      </button>
    </div>

    <!-- Tabela de representantes ativos -->
    <table *ngIf="filteredRepresentatives.length > 0">
      <thead>
      <tr>
        <th>{{ t('manageRepresentatives.name') }}</th>
        <th>{{ t('manageRepresentatives.email') }}</th>
        <th>{{ t('manageRepresentatives.citizenId') }}</th>
        <th>{{ t('manageRepresentatives.status') }}</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let r of filteredRepresentatives">
        <td>{{ r.name }}</td>
        <td>{{ r.email }}</td>
        <td>{{ r.citizenId ?? r.id }}</td>
        <td>{{ r.isActive ? 'Active' : 'Inactive' }}</td>
      </tr>
      </tbody>
    </table>

    <p *ngIf="filteredRepresentatives.length === 0">
      {{ t('manageRepresentatives.noActive') }}
    </p>

    <!-- Campo de ID para desativar -->
    <div class="select-edit">
      <label>{{ t('manageRepresentatives.enterIdToDeactivate') }}</label>
      <input [(ngModel)]="selectedId" placeholder="Citizen ID" />
      <button (click)="deactivateRepresentative(selectedId)" class="danger">
        {{ t('manageRepresentatives.deactivate') }}
      </button>
    </div>

    <div class="form-buttons">
      <button type="button" class="secondary" (click)="goBack()">
        {{ t('common.back') }}
      </button>
    </div>
  </div>
</section>
